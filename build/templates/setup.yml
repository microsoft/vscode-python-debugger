# DevDiv pipeline setup steps
parameters:
  - name: installNode
    type: boolean
    default: true
  - name: installPython
    type: boolean
    default: true
  - name: npmrcPath
    type: string
    default: '$(Build.SourcesDirectory)/.npmrc'

steps:
  - ${{ if eq(parameters.installNode, true) }}:
      - task: npmAuthenticate@0
        inputs:
          workingFile: ${{ parameters.npmrcPath }}

      - script: npm config get registry
        displayName: Verify NPM Registry

      - task: NodeTool@0
        inputs:
          versionSpec: '22.17.0'
          checkLatest: true
        displayName: Select Node 22 LTS

  - ${{ if eq(parameters.installPython, true) }}:
      - task: PipAuthenticate@1
        displayName: 'Pip Authenticate'
        inputs:
          artifactFeeds: 'DevDiv/debugpy'

      - task: UsePythonVersion@0
        inputs:
          versionSpec: '3.9' # note Install Python dependencies step below relies on Python 3.9
          addToPath: true
          architecture: 'x64'
        displayName: Select Python version
